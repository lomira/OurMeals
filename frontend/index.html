<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>OurMeals - Planificateur de repas et de courses</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Minimalist styling -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <h1>OurMeals</h1>
      <p class="subtitle">
        Recettes simples, plan de repas hebdomadaire et liste de courses
      </p>
    </header>

    <main>
      <!-- Add New Recipe -->
      <section class="card">
        <h2>Ajouter / Modifier une recette</h2>
        <form id="recipe-form">
          <div class="form-row">
            <label for="recipe-name">Nom</label>
            <input
              type="text"
              id="recipe-name"
              name="name"
              placeholder="ex. Spaghettis bolognaise"
              required
            />
          </div>

          <div class="form-row">
            <label for="recipe-servings">Portions</label>
            <input
              type="number"
              id="recipe-servings"
              name="baseServings"
              min="1"
              value="1"
            />
          </div>

          <div class="form-row">
            <label for="recipe-ingredients"
              >Ingrédients (un par ligne ou séparés par des virgules)</label
            >
            <textarea
              id="recipe-ingredients"
              name="ingredients"
              rows="5"
              placeholder="boeuf haché
oignon
sauce tomate
spaghettis"
              required
            ></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" id="save-recipe">
              Enregistrer la recette
            </button>
            <button type="button" id="cancel-edit" class="secondary" hidden>
              Annuler la modification
            </button>
          </div>

          <p class="hint">
            Astuce&nbsp;: Vous pouvez coller les ingrédients ligne par ligne ou
            séparés par des virgules. L’application les normalisera.
          </p>
          <p class="hint" id="edit-warning" hidden>
            La modification recrée la recette (pas d’endpoint de mise à jour),
            donc toute affectation dans le plan de repas pour l’ancienne recette
            sera supprimée.
          </p>
        </form>
      </section>

      <!-- Recipes List -->
      <section class="card">
        <h2>Recettes</h2>
        <ul id="recipes-list" class="list"></ul>
      </section>

      <!-- Weekly Meal Plan -->
      <section class="card">
        <h2>Plan de repas hebdomadaire</h2>
        <div class="table-wrapper">
          <table id="meal-plan-table">
            <thead>
              <tr>
                <th>Jour</th>
                <th>Petit-déjeuner</th>
                <th>Déjeuner</th>
                <th>Dîner</th>
              </tr>
            </thead>
            <tbody id="meal-plan-body">
              <!-- Rows for Monday-Sunday rendered by script.js -->
            </tbody>
          </table>
        </div>
        <p class="hint">
          Sélectionner une recette dans une cellule l’assigne à cet emplacement.
          Changer la sélection désassignera la recette précédente.
        </p>
      </section>

      <!-- Grocery List -->
      <section class="card">
        <h2>Liste de courses</h2>
        <div class="form-actions">
          <label
            for="grocery-start-date"
            class="muted"
            style="margin-right: 8px"
            >À partir du</label
          >
          <input type="date" id="grocery-start-date" />
          <button id="generate-grocery">Générer la liste de courses</button>
        </div>
        <ul id="grocery-list" class="list"></ul>
      </section>
    </main>

    <footer>
      <p>
        L’API backend doit être en cours d’exécution. En local, la valeur par
        défaut est http://localhost:5000. Sur Render, définissez API_BASE dans
        script.js.
      </p>
    </footer>

    <!-- Using same-origin API on Render; leave API_BASE unset -->
    <!-- App logic -->
    <script src="script.js"></script>
  </body>
</html>
